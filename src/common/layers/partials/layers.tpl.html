<div id="layerpanel-group" class="panel-group loom-arrangeable" arrangeable-handle="div.layer-heading"
     arrangeable-item-selector="div.panel" arrangeable-callback="reorderLayer"
     arrangeable-placeholder='<div class="placeholder"></div>'>
  <div class="panel"
       ng-repeat="layer in layers = mapService.map.getLayers().getArray() | reverse | filter:filterHiddenLayers">
    <div class="panel-heading layer-heading" data-toggle="collapse"
         data-parent="#layerpanel-group" data-target="#{{layer.get('metadata').label}}">
      <div class="row">
        <div class="layer-title ellipsis">
          {{layer.get('metadata').label}}
        </div>
        <div class="layer-buttons">
          <span ng-show="isGeogit(layer)" ng-click="showHistory(layer)" stop-event="click mousedown"
                class="btn btn-xs btn-default">
            <i class="glyphicon glyphicon-time"></i>
          </span>
          <span ng-click="featureManagerService.startFeatureInsert(layer)"
                ng-show="layer.get('metadata').editable" stop-event="click mousedown" class="btn btn-xs btn-default"
                ng-class="{'disabled': (!layer.get('visible') || !layer.get('metadata').schema)}">
            <i class="glyphicon glyphicon-pencil"></i>
          </span>
          <span ng-click="toggleVisibility(layer)" stop-event="click mousedown"
                class="btn btn-xs btn-default layer-visible-button" ng-class="{'layer-visible': layer.get('visible')}">
            <i class="glyphicon"
               ng-class="{'glyphicon-eye-close': !layer.get('visible'), 'glyphicon-eye-open': layer.get('visible')}"></i>
          </span>
        </div>
      </div>
    </div>
    <div id="{{layer.get('metadata').label}}" class="panel-collapse collapse">
      <div class="panel-body">
        <button ng-click="removeLayer(layer)" id="remove-button" class="remove-layer-button btn btn-sm btn-block">
          <i class="glyphicon glyphicon-minus-sign"></i>
          <span translate="remove_layer"></span>
        </button>
      </div>
    </div>
  </div>
</div>
